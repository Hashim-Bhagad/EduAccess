{% extends 'base.html' %} 
{% block title %}Add Question - EduAccess{% endblock%}
{% block content %}
<div class="container my-5" style="padding-top: 80px">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="card shadow-sm border-0">
        <div
          class="card-header bg-white border-bottom-0 pt-4 pb-0 d-flex justify-content-between"
        >
          <h2 class="h4 mb-0 fw-bold">Add Question to "{{ quiz.title }}"</h2>
          <span class="badge bg-secondary"
            >{{ quiz.questions.count }} Questions Added</span
          >
        </div>
        <div class="card-body p-4">
          <form method="POST">
            {% csrf_token %}
            <div class="mb-3">
              <label class="form-label fw-bold">Question Text</label>
              {{ form.question_text }}
            </div>

            <div class="row">
              <div class="col-md-6 mb-3">
                <!-- Type is hidden and defaulted to multiple_choice in form -->
                <input
                  type="hidden"
                  name="question_type"
                  value="multiple_choice"
                />
              </div>
              <div class="col-md-3 mb-3">
                <label class="form-label fw-bold">Points</label>
                {{ form.points }}
              </div>
              <div class="col-md-3 mb-3">
                <label class="form-label fw-bold">Order</label>
                {{ form.order }}
              </div>
            </div>

            <!-- MCQ Options Section (Always Visible) -->
            <div id="mcq-options" class="mb-4 p-3 bg-light rounded border">
              <h6 class="fw-bold mb-3">Answer Options</h6>
              <p class="small text-muted mb-3">
                Enter options and select the correct answer.
              </p>

              {% for i in "1234" %}
              <div class="input-group mb-2">
                <div class="input-group-text">
                  <input
                    class="form-check-input mt-0"
                    type="radio"
                    name="correct_answer"
                    value="{{ forloop.counter0 }}"
                    {%
                    if
                    forloop.first
                    %}checked{%
                    endif
                    %}
                    aria-label="Correct answer"
                  />
                </div>
                <input
                  type="text"
                  class="form-control"
                  name="answer_{{ forloop.counter0 }}"
                  placeholder="Option {{ forloop.counter }}"
                />
              </div>
              {% endfor %}
            </div>

            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
              <a
                href="{% url 'core:course_detail' quiz.lesson.module.course.id %}"
                class="btn btn-outline-secondary"
                >Finish & Exit</a
              >
              <button
                type="submit"
                name="add_another"
                class="btn btn-outline-primary"
              >
                Save & Add Another
              </button>
              <button type="submit" class="btn btn-primary">
                Save & Finish
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
